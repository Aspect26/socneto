<modal [(visible)]="displayed">
    <material-dialog headered
                     class="dialog"
                     [error]="errorMessage">

        <div header>
            <h1>Create new job</h1>
            <material-button icon autoFocus (trigger)="onCloseDialog()">
                <material-icon icon="close"></material-icon>
            </material-button>
        </div>

        <div>
            Title:
            <material-input
                    label="Name of the job"
                    floatingLabel
                    [(ngModel)]="jobName"
                    class="labeled-input">
            </material-input>

            <div>
                Topic:
                <material-input
                        label="The topic to be queried"
                        floatingLabel
                        [(ngModel)]="topic"
                        class="labeled-input">
                </material-input>
            </div>

            Social Networks:
            <components-select
                    [components]="availableSocialNetworks"
                    [loading]="loadingSocialNetworks"
                    (change)="onSocialNetworksSelectionChange($event)"
                    (refresh)="onSocialNetworksRefresh()">
            </components-select>

            Data analyzers:
            <components-select
                    [components]="availableDataAnalyzers"
                    [loading]="loadingDataAnalyzers"
                    (change)="onDataAnalyzersSelectionChange($event)"
                    (refresh)="onDataAnalyzersRefresh()">
            </components-select>
        </div>

        <div footer>
            <material-button *ngIf="isJobDefinitionCorrect()" class="close-button" (trigger)="onSubmit()">Submit</material-button>
            <material-button *ngIf="!isJobDefinitionCorrect()" disabled class="close-button">Submit</material-button>
        </div>

    </material-dialog>
</modal>