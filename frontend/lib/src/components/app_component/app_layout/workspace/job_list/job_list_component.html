<div class="job-list-card">

    <div class="header">
        <h2>Jobs</h2>

        <div class="status">
            User: {{ username }}<br>
            Jobs running: {{ runningJobs }}/{{ jobs.length }}
        </div>
    </div>

    <material-list focusList class="dark">

        <material-select-item *ngFor="let job of displayedJobs" (trigger)="selectJob(job.id)" focusItem [selected]="job == selectedJob">

            <material-button icon *ngIf="job.isRunning" class="material-list-item-primary" aria-hidden="true" (trigger)="stopJob(job); $event.stopPropagation()">
                <material-icon icon="stop" ></material-icon>
            </material-button>
            <!--
            <material-button icon *ngIf="job.isRunning" class="material-list-item-primary" aria-hidden="true" (trigger)="pauseJob(job); $event.stopPropagation()">
                <material-icon icon="pause" ></material-icon>
            </material-button>
            -->

            <!--
            <material-button icon *ngIf="!job.isRunning" class="material-list-item-primary" aria-hidden="true" (trigger)="resumeJob(job); $event.stopPropagation()">
                <material-icon icon="play_arrow" ></material-icon>
            </material-button>
            -->

            <div>
                <b>{{job.name}}</b> <br>
                Created at: {{ getHumanReadableDate(job.startedAt) }} <br>
                <ng-container *ngIf="!job.isRunning">Paused at: {{ getHumanReadableDate(job.pausedAt) }}</ng-container>

                <span *ngIf="job.isRunning" class="secondary">
                    In progress for {{ getProcessingTime(job) }}
                </span>
            </div>

        </material-select-item>
    </material-list>

    <div class="footer">
        <div class="paginator">
            <paginator *ngIf="jobs.length > PAGE_SIZE" [pages]="1" [paginator]="paginator" (pageChange)="onPageChange($event)"></paginator>
        </div>

        <div class="create-job-button-wrapper">
            <material-button (trigger)="onCreateNewJob($event)">
                <material-icon icon="add" class="material-list-item-primary" aria-hidden="true"></material-icon>
                Create Job
            </material-button>
        </div>
    </div>
</div>

<create-job-modal (submit)="onCreateJobSubmit($event)"></create-job-modal>
