<div class="create-chart-button-wrapper" (click)="onClick()">
    <svg class="add-icon"  enable-background="new 0 0 512 512" id="Layer_1" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M256,512C114.625,512,0,397.391,0,256C0,114.609,114.625,0,256,0c141.391,0,256,114.609,256,256  C512,397.391,397.391,512,256,512z M256,64C149.969,64,64,149.969,64,256s85.969,192,192,192c106.047,0,192-85.969,192-192  S362.047,64,256,64z M288,384h-64v-96h-96v-64h96v-96h64v96h96v64h-96V384z"/>
    </svg>
</div>

<!-- TODO: move this modal as its own component -->
<modal [(visible)]="showCreateDialog">
    <material-dialog headered
                     class="dialog"
                     [error]="errorMessage">

        <div header>
            <h1>Create new chart</h1>
            <material-button icon autoFocus (trigger)="onCloseDialog()">
                <material-icon icon="close"></material-icon>
            </material-button>
        </div>

        <chart-type-select (change)="onChartTypeSelected($event)"></chart-type-select>

        <br>

        <div *ngIf="analysers.isNotEmpty" class="data-paths">
            <div *ngFor="let dataPath of dataPaths; let i = index" class="data-path-row">
                <div class="data-path">
                    <span class="label">
                        Line {{ i + 1 }}:
                    </span>
                    <material-dropdown-select class="analyser-select"
                            buttonText="{{ dataPath.analyser.identifier }}"
                            [(selection)]="dataPath.analyser"
                            [options]="analysers"
                            [itemRenderer]="itemRenderer">
                    </material-dropdown-select>

                    <material-dropdown-select class="property-select"
                            buttonText="{{ dataPath.property }}"
                            [(selection)]="dataPath.property"
                            [options]="dataPath.analyser.properties">
                    </material-dropdown-select>
                </div>

                <material-button icon (trigger)="onRemoveDataPath(dataPath)">
                    <material-icon icon="remove"></material-icon>
                </material-button>
            </div>

            <div>
                <material-button icon (trigger)="onAddDataPath()">
                    <material-icon icon="add"></material-icon>
                </material-button>
            </div>
        </div>

        <div *ngIf="analysers.isEmpty" class="info-box">
            <span>
                No analysers found for this job!
            </span>
        </div>

        <div footer>
            <material-button *ngIf="isDefinitionCorrect() && analysers.isNotEmpty" class="close-button" (trigger)="onSubmit()">Submit</material-button>
            <material-button *ngIf="!(isDefinitionCorrect() && analysers.isNotEmpty)" disabled class="close-button" (trigger)="onSubmit()">Submit</material-button>
        </div>

    </material-dialog>
</modal>
